[buildout]
extends = buildout.cfg.template
find-links += ./sources/eggs

parts += celery_app

# Add celery_app_project to PYTHON_PATH
develop += ./celery_app_project

# Installs inouk.odoo_celery in dev mode
vcs-extend-develop += git+git@bitbucket.org:cmorisse/inouk.odoo_celery.git@master#egg=i.odoo_celery
vcs-update = False
develop-dir = ./develop-src


[celery_app]
recipe = inouk.odoo_celery
# Next line defines the application named used in the broker
#celery_application_main_name = odoo_celery_app
celery_application_main_name = odoo_celery_demo
#celery_app_folder = celery_app_project
#tasks_file_name = celery_tasks
# By default the recipe, use the Odoo configuration file generated by anybox.odoo.recipe
# next line allows to force use of an alternate config file.
#odoo_config_file= {{inject odoo config file generated by recipe}}

# Note that all parameters defined above can be defined by hand in 
# {{ project_directory }}/celery_app_project/celery_app/__init__.py

[openerp]
options.db_name = odoocelery_db

# Installs recipe celery_app
eggs += celery
        celery_app
        inouk.odoo_celery
#        redis
# Add redis only if using celery with redis


# Makes odoo recipe create a bin/odoo_celery script from 
# inouk.odoo_celery.buildout_script:entry_point 
odoo_scripts += ioc_celery_launcher=odoo_celery arguments=session